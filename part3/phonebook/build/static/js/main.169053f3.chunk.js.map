{"version":3,"sources":["services/persons.js","components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","persons","getAll","axios","get","then","res","data","create","newPerson","post","remove","id","delete","update","person","newInfo","put","Filter","filter","handleSearchChange","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Persons","handleRemove","flatMap","name","toLowerCase","includes","number","onClick","Notification","message","notificationStyle","backgroundColor","fontSize","borderStyle","borderRadius","padding","marginBottom","style","color","App","useState","setPersons","setNewName","setNewNumber","setFilter","notificationMessage","setNotificationMessage","notificationType","setNotificationType","removePersonFromPersons","useEffect","personService","showNotification","setTimeout","updatePerson","changes","map","event","target","preventDefault","personObject","duplicate","find","personToRemove","window","confirm","_","catch","_error","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sNAEMA,EAAU,eAgCDC,EAPC,CACdC,OAxBa,WAEb,OADgBC,IAAMC,IAAIJ,GACXK,MAAK,SAACC,GAAD,OAASA,EAAIC,SAuBjCC,OApBa,SAACC,GAEd,OADgBN,IAAMO,KAAKV,EAASS,GACrBJ,MAAK,SAACC,GAAD,OAASA,EAAIC,SAmBjCI,OAhBa,SAACC,GAEd,OADgBT,IAAMU,OAAN,UAAgBb,EAAhB,YAA2BY,IAC5BP,MAAK,SAACC,GAAD,OAASA,EAAIC,SAejCO,OAZa,SAACC,EAAQC,GAKtB,OAJgBb,IAAMc,IAAN,UAAajB,EAAb,YAAwBe,EAAOH,IAA/B,2BACXG,GACAC,IAEUX,MAAK,SAACC,GAAD,OAASA,EAAIC,U,OChBpBW,EANA,SAAC,GAAD,IAAGC,EAAH,EAAGA,OAAQC,EAAX,EAAWA,mBAAX,OACb,qDACoB,uBAAOC,MAAOF,EAAQG,SAAUF,QCkBvCG,EApBI,SAAC,GAAD,IACjBC,EADiB,EACjBA,UACAC,EAFiB,EAEjBA,QACAC,EAHiB,EAGjBA,iBACAC,EAJiB,EAIjBA,UACAC,EALiB,EAKjBA,mBALiB,OAOjB,uBAAMC,SAAUL,EAAhB,UACE,yCACQ,uBAAOH,MAAOI,EAASH,SAAUI,OAEzC,2CACU,uBAAOL,MAAOM,EAAWL,SAAUM,OAE7C,8BACE,wBAAQE,KAAK,SAAb,uBCASC,EAfC,SAAC,GAAD,IAAG9B,EAAH,EAAGA,QAASkB,EAAZ,EAAYA,OAAQa,EAApB,EAAoBA,aAApB,OACd,8BACG/B,EAAQgC,SAAQ,SAAClB,GAAD,OACdA,EAAOmB,KAAKC,cAAcC,SAASjB,EAAOgB,eAGzC,gCACGpB,EAAOmB,KADV,IACiBnB,EAAOsB,OAAQ,IAC9B,wBAAQC,QAAS,kBAAMN,EAAajB,IAApC,sBAFQA,EAAOmB,MAFjB,SCoBOK,EAxBM,SAAC,GAAmC,IAAjCC,EAAgC,EAAhCA,QAAgC,IAAvBV,KAGzBW,EAAoB,CACxBC,gBAAiB,YACjBC,SAAU,OACVC,YAAa,QACbC,aAAc,MACdC,QAAS,OACTC,aAAc,QAGVC,EACK,kBAb2C,MAAhB,UAAgB,GAapD,2BACSP,GAZU,CAAEQ,MAAO,UAW5B,2BAESR,GAdQ,CAAEQ,MAAO,QAgB5B,OAAgB,OAAZT,EACK,KAGF,qBAAKQ,MAAOA,EAAZ,SAAoBR,KC6FdU,EA7GH,WACV,MAA8BC,mBAAS,IAAvC,mBAAOlD,EAAP,KAAgBmD,EAAhB,KACA,EAA8BD,mBAAS,IAAvC,mBAAO1B,EAAP,KAAgB4B,EAAhB,KACA,EAAkCF,mBAAS,IAA3C,mBAAOxB,EAAP,KAAkB2B,EAAlB,KACA,EAA4BH,mBAAS,IAArC,mBAAOhC,EAAP,KAAeoC,EAAf,KACA,EAAsDJ,mBAAS,MAA/D,mBAAOK,EAAP,KAA4BC,EAA5B,KACA,EAAgDN,qBAAhD,mBAAOO,EAAP,KAAyBC,EAAzB,KAEMC,EAA0B,SAAChD,GAAD,OAC9BwC,EAAWnD,EAAQkB,QAAO,SAACJ,GAAD,OAAYH,IAAOG,EAAOH,QAEtDiD,qBAAU,kBAAMC,EAAc5D,SAASG,MAAK,SAACC,GAAD,OAAS8C,EAAW9C,QAAO,IAEvE,IAAMyD,EAAmB,SAACvB,EAASV,GACjC2B,EAAuBjB,GACvBmB,EAAoB7B,GACpBkC,YAAW,kBAAMP,EAAuB,QAAO,MA2B3CQ,EAAe,SAAClD,EAAQmD,GACxBnD,EAAOsB,SAAW6B,EAAQ7B,OAC5B0B,EAAiB,GAAD,OAAItC,EAAJ,kCAA6C,SAE7DqC,EAAchD,OAAOC,EAArB,eAAkCmD,IAAW7D,MAAK,SAACC,GACjD8C,EACEnD,EAAQkE,KAAI,SAACpD,GAAD,OAAaA,EAAOH,KAAON,EAAIM,GAAKN,EAAMS,MAGxDgD,EAAiB,WAAD,OACHzD,EAAI4B,KADD,8BAC2B5B,EAAI+B,QAC7C,WAGFgB,EAAW,IACXC,EAAa,QAgCnB,OACE,gCACE,2CACA,cAAC,EAAD,CAAcd,QAASgB,EAAqB1B,KAAM4B,IAClD,cAAC,EAAD,CAAQvC,OAAQA,EAAQC,mBA7BD,SAACgD,GAAD,OAAWb,EAAUa,EAAMC,OAAOhD,UA8BzD,2CACA,cAAC,EAAD,CACEG,UA9EY,SAAC4C,GACjBA,EAAME,iBAEN,IAAMC,EAAe,CACnBrC,KAAMT,EACNY,OAAQV,GAGJ6C,EAAYvE,EAAQwE,MACxB,SAAC1D,GAAD,OAAYA,EAAOmB,OAASqC,EAAarC,QAGvCsC,EACFP,EAAaO,EAAWD,GAExBT,EAActD,OAAO+D,GAAclE,MAAK,SAACC,GACvCyD,EAAiB,SAAD,OAAUzD,EAAI4B,KAAd,iBAAmC,WACnDkB,EAAW,GAAD,mBAAKnD,GAAL,CAAcK,KACxB+C,EAAW,IACXC,EAAa,QA4Db7B,QAASA,EACTC,iBApCmB,SAAC0C,GAAD,OAAWf,EAAWe,EAAMC,OAAOhD,QAqCtDM,UAAWA,EACXC,mBArCqB,SAACwC,GAAD,OAAWd,EAAac,EAAMC,OAAOhD,UAuC5D,yCACA,cAAC,EAAD,CAASpB,QAASA,EAASkB,OAAQA,EAAQa,aArC1B,SAAC0C,GAChBC,OAAOC,QAAP,iBAAyBF,EAAexC,KAAxC,OACF4B,EACGnD,OAAO+D,EAAe9D,IACtBP,MAAK,SAACwE,GACLd,EAAiB,WAAD,OACHW,EAAexC,KADZ,mBAEd,WAGF0B,EAAwBc,EAAe9D,OAExCkE,OAAM,SAACC,GACNhB,EAAiB,kBAAD,OACIW,EAAexC,KADnB,yCAEd,SAGF0B,EAAwBc,EAAe9D,cCvFjDoE,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.169053f3.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((res) => res.data);\n};\n\nconst create = (newPerson) => {\n  const request = axios.post(baseUrl, newPerson);\n  return request.then((res) => res.data);\n};\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((res) => res.data);\n};\n\nconst update = (person, newInfo) => {\n  const request = axios.put(`${baseUrl}/${person.id}`, {\n    ...person,\n    ...newInfo,\n  });\n  return request.then((res) => res.data);\n};\n\nconst persons = {\n  getAll,\n  create,\n  remove,\n  update,\n};\n\nexport default persons;\n","import React from 'react';\n\nconst Filter = ({ filter, handleSearchChange }) => (\n  <div>\n    filter shown with <input value={filter} onChange={handleSearchChange} />\n  </div>\n);\n\nexport default Filter;\n","import React from 'react';\n\nconst PersonForm = ({\n  addPerson,\n  newName,\n  handleNameChange,\n  newNumber,\n  handleNumberChange,\n}) => (\n  <form onSubmit={addPerson}>\n    <div>\n      name: <input value={newName} onChange={handleNameChange} />\n    </div>\n    <div>\n      number: <input value={newNumber} onChange={handleNumberChange} />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n);\n\nexport default PersonForm;\n","import React from 'react';\n\nconst Persons = ({ persons, filter, handleRemove }) => (\n  <div>\n    {persons.flatMap((person) =>\n      !person.name.toLowerCase().includes(filter.toLowerCase()) ? (\n        []\n      ) : (\n        <div key={person.name}>\n          {person.name} {person.number}{' '}\n          <button onClick={() => handleRemove(person)}>delete</button>\n        </div>\n      )\n    )}\n  </div>\n);\n\nexport default Persons;\n","import React from 'react';\n\nconst Notification = ({ message, type = 'success' }) => {\n  const errorStyle = { color: 'red' };\n  const successStyle = { color: 'green' };\n  const notificationStyle = {\n    backgroundColor: 'lightgrey',\n    fontSize: '20px',\n    borderStyle: 'solid',\n    borderRadius: '5px',\n    padding: '10px',\n    marginBottom: '10px',\n  };\n\n  const style =\n    type === 'success'\n      ? { ...notificationStyle, ...successStyle }\n      : { ...notificationStyle, ...errorStyle };\n\n  if (message === null) {\n    return null;\n  }\n\n  return <div style={style}>{message}</div>;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from 'react';\nimport personService from './services/persons';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport Notification from './components/Notification';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [filter, setFilter] = useState('');\n  const [notificationMessage, setNotificationMessage] = useState(null);\n  const [notificationType, setNotificationType] = useState();\n\n  const removePersonFromPersons = (id) =>\n    setPersons(persons.filter((person) => id !== person.id));\n\n  useEffect(() => personService.getAll().then((res) => setPersons(res)), []);\n\n  const showNotification = (message, type) => {\n    setNotificationMessage(message);\n    setNotificationType(type);\n    setTimeout(() => setNotificationMessage(null), 5000);\n  };\n\n  const addPerson = (event) => {\n    event.preventDefault();\n\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    };\n\n    const duplicate = persons.find(\n      (person) => person.name === personObject.name\n    );\n\n    if (duplicate) {\n      updatePerson(duplicate, personObject);\n    } else {\n      personService.create(personObject).then((res) => {\n        showNotification(`Added ${res.name} to phonebook`, 'success');\n        setPersons([...persons, res]);\n        setNewName('');\n        setNewNumber('');\n      });\n    }\n  };\n\n  const updatePerson = (person, changes) => {\n    if (person.number === changes.number) {\n      showNotification(`${newName} is already added to phonebook`, 'error');\n    } else {\n      personService.update(person, { ...changes }).then((res) => {\n        setPersons(\n          persons.map((person) => (person.id === res.id ? res : person))\n        );\n\n        showNotification(\n          `Updated ${res.name} with phone number ${res.number}`,\n          'success'\n        );\n\n        setNewName('');\n        setNewNumber('');\n      });\n    }\n  };\n\n  const handleNameChange = (event) => setNewName(event.target.value);\n  const handleNumberChange = (event) => setNewNumber(event.target.value);\n  const handleSearchChange = (event) => setFilter(event.target.value);\n\n  const handleRemove = (personToRemove) => {\n    if (window.confirm(`Delete ${personToRemove.name}?`)) {\n      personService\n        .remove(personToRemove.id)\n        .then((_) => {\n          showNotification(\n            `Removed ${personToRemove.name} from phonebook`,\n            'success'\n          );\n\n          removePersonFromPersons(personToRemove.id);\n        })\n        .catch((_error) => {\n          showNotification(\n            `Information of ${personToRemove.name} has already been removed from server`,\n            'error'\n          );\n\n          removePersonFromPersons(personToRemove.id);\n        });\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notificationMessage} type={notificationType} />\n      <Filter filter={filter} handleSearchChange={handleSearchChange} />\n      <h2>add a new</h2>\n      <PersonForm\n        addPerson={addPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={persons} filter={filter} handleRemove={handleRemove} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}