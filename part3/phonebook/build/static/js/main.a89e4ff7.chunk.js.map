{"version":3,"sources":["services/persons.js","components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","persons","getAll","axios","get","then","res","data","create","newPerson","post","remove","id","delete","update","person","newInfo","put","_id","Filter","filter","handleSearchChange","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Persons","handleRemove","flatMap","name","toLowerCase","includes","number","onClick","Notification","message","notificationStyle","backgroundColor","fontSize","borderStyle","borderRadius","padding","marginBottom","style","color","App","useState","setPersons","setNewName","setNewNumber","setFilter","notificationMessage","setNotificationMessage","notificationType","setNotificationType","removePersonFromPersons","useEffect","personService","showNotification","setTimeout","updatePerson","changes","map","catch","err","response","error","event","target","preventDefault","personObject","duplicate","find","personToRemove","window","confirm","_","_error","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a89e4ff7.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((res) => res.data);\n};\n\nconst create = (newPerson) => {\n  const request = axios.post(baseUrl, newPerson);\n  return request.then((res) => res.data);\n};\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((res) => res.data);\n};\n\nconst update = (person, newInfo) => {\n  const request = axios.put(`${baseUrl}/${person._id}`, {\n    ...person,\n    ...newInfo,\n  });\n  return request.then((res) => res.data);\n};\n\nconst persons = {\n  getAll,\n  create,\n  remove,\n  update,\n};\n\nexport default persons;\n","import React from 'react';\n\nconst Filter = ({ filter, handleSearchChange }) => (\n  <div>\n    filter shown with <input value={filter} onChange={handleSearchChange} />\n  </div>\n);\n\nexport default Filter;\n","import React from 'react';\n\nconst PersonForm = ({\n  addPerson,\n  newName,\n  handleNameChange,\n  newNumber,\n  handleNumberChange,\n}) => (\n  <form onSubmit={addPerson}>\n    <div>\n      name: <input value={newName} onChange={handleNameChange} />\n    </div>\n    <div>\n      number: <input value={newNumber} onChange={handleNumberChange} />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n);\n\nexport default PersonForm;\n","import React from 'react';\n\nconst Persons = ({ persons, filter, handleRemove }) => (\n  <div>\n    {persons.flatMap((person) =>\n      !person.name.toLowerCase().includes(filter.toLowerCase()) ? (\n        []\n      ) : (\n        <div key={person.name}>\n          {person.name} {person.number}{' '}\n          <button onClick={() => handleRemove(person)}>delete</button>\n        </div>\n      )\n    )}\n  </div>\n);\n\nexport default Persons;\n","import React from 'react';\n\nconst Notification = ({ message, type = 'success' }) => {\n  const errorStyle = { color: 'red' };\n  const successStyle = { color: 'green' };\n  const notificationStyle = {\n    backgroundColor: 'lightgrey',\n    fontSize: '20px',\n    borderStyle: 'solid',\n    borderRadius: '5px',\n    padding: '10px',\n    marginBottom: '10px',\n  };\n\n  const style =\n    type === 'success'\n      ? { ...notificationStyle, ...successStyle }\n      : { ...notificationStyle, ...errorStyle };\n\n  if (message === null) {\n    return null;\n  }\n\n  return <div style={style}>{message}</div>;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from 'react';\nimport personService from './services/persons';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport Notification from './components/Notification';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [filter, setFilter] = useState('');\n  const [notificationMessage, setNotificationMessage] = useState(null);\n  const [notificationType, setNotificationType] = useState();\n\n  const removePersonFromPersons = (id) =>\n    setPersons(persons.filter((person) => id !== person._id));\n\n  useEffect(() => personService.getAll().then((res) => setPersons(res)), []);\n\n  const showNotification = (message, type) => {\n    setNotificationMessage(message);\n    setNotificationType(type);\n    setTimeout(() => setNotificationMessage(null), 5000);\n  };\n\n  const addPerson = (event) => {\n    event.preventDefault();\n\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    };\n\n    const duplicate = persons.find(\n      (person) => person.name === personObject.name\n    );\n\n    if (duplicate) {\n      updatePerson(duplicate, personObject);\n    } else {\n      personService\n        .create(personObject)\n        .then((res) => {\n          showNotification(`Added ${res.name} to phonebook`, 'success');\n          setPersons([...persons, res]);\n          setNewName('');\n          setNewNumber('');\n        })\n        .catch((err) => {\n          showNotification(err.response.data.error, 'error');\n        });\n    }\n  };\n\n  const updatePerson = (person, changes) => {\n    if (person.number === changes.number) {\n      showNotification(`${newName} is already added to phonebook`, 'error');\n    } else {\n      personService\n        .update(person, { ...changes })\n        .then((res) => {\n          setPersons(\n            persons.map((person) => (person._id === res._id ? res : person))\n          );\n\n          showNotification(\n            `Updated ${res.name} with phone number ${res.number}`,\n            'success'\n          );\n\n          setNewName('');\n          setNewNumber('');\n        })\n        .catch((err) => {\n          showNotification(err.response.data.error, 'error');\n        });\n    }\n  };\n\n  const handleNameChange = (event) => setNewName(event.target.value);\n  const handleNumberChange = (event) => setNewNumber(event.target.value);\n  const handleSearchChange = (event) => setFilter(event.target.value);\n\n  const handleRemove = (personToRemove) => {\n    const { _id, name } = personToRemove;\n\n    if (window.confirm(`Delete ${name}?`)) {\n      personService\n        .remove(_id)\n        .then((_) => {\n          showNotification(`Removed ${name} from phonebook`, 'success');\n\n          removePersonFromPersons(_id);\n        })\n        .catch((_error) => {\n          showNotification(\n            `Information of ${name} has already been removed from server`,\n            'error'\n          );\n\n          removePersonFromPersons(_id);\n        });\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notificationMessage} type={notificationType} />\n      <Filter filter={filter} handleSearchChange={handleSearchChange} />\n      <h2>add a new</h2>\n      <PersonForm\n        addPerson={addPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={persons} filter={filter} handleRemove={handleRemove} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}